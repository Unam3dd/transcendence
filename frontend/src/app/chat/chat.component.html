<div class="global">

  <div id="active-chat-title">{{ this.ws.client_name }}</div>
  <div class="conversation">

    <ul class="messages">
      <div class="capsule" *ngFor="let msg of this.ws.received_messages">

        <div *ngIf="!IsBlocked(msg.author.id) && this.ws.targetRecipient === null && msg.recipient === null">
          <div class="picture-column">
            <div class="thumbnail">  
              <img src={{msg.author.avatar}}/>
            </div>
          </div>
          <div class="message-zone">
            <div class="author-name">{{msg.author.nickName}} :</div>
            <div class="message-content">{{msg.content}}</div>
          </div>
        </div>

        <div *ngIf="!IsBlocked(msg.author.id) && this.ws.targetRecipient && msg.recipient && (msg.author.login === this.ws.getUserInformation()?.login || msg.author.login === this.ws.targetRecipient?.login) && (msg.recipient.login === this.ws.getUserInformation()?.login || msg.recipient.login === this.ws.targetRecipient?.login)">
          <div class="picture-column">
            <div class="thumbnail">  
              <img src={{msg.author.avatar}}/>
            </div>
          </div>
          <div class="message-zone">
            <div class="author-name">{{msg.author.nickName}} :</div>
            <div class="message-content">{{msg.content}}</div>
          </div>
        </div>

      </div>
    </ul>

    <form class="messagebox" [formGroup]="msg" (ngSubmit)="sendMessage()">
      <input placeholder="Enter your message here" id="messageinput" type="text" formControlName="content" required>
      <button id="sendbutton" type="submit">Send !</button>
    </form>

  </div>

</div>
